#include <Servo.h>

Servo headRotate;
Servo headUp;


String currentMessage = ""; // variable to store the current message


int rotatePos = 90;    // variable to store the servo position
int upPos = 100;    // variable to store the servo position


void setup() {

  headRotate.attach(12); 
  headUp.attach(13);
  
  delay(2000);

  // open the serial port:
  Serial.begin(115200);


  //all the servos to rest position or p0
  headRotate.write(rotatePos);
  headUp.write(upPos);

  delay(1000);

}

void loop() {


// read serial msg send from the pyhton code.
  if (Serial.available() > 0) {
    String message = Serial.readStringUntil('\n');

    if (message != currentMessage) {
      currentMessage = message;
    }


    if (currentMessage == "R" && currentMessage != "C" && rotatePos > 10){
        rotatePos--;
      }

    else if (currentMessage == "L" && currentMessage != "C" && rotatePos < 170){
        rotatePos++;
      }

    else if ((currentMessage == "X" || currentMessage == "E") && currentMessage != "C" && rotatePos != 90 ){
        if (rotatePos < 90){
          for(int i = rotatePos; i <= 90; i++){
            rotatePos = i;
            headRotate.write(rotatePos);
            delay(50);
          }
        }
        else if(rotatePos > 90){
          for(int i = rotatePos; i >= 90; i--){
            rotatePos = i;
            headRotate.write(rotatePos);
            delay(50);
          }
        }
        delay(4000);
      }

    headRotate.write(rotatePos);              // tell servo to go to position in variable 'pos'

    
    }


}
